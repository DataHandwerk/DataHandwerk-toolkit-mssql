:filename: dwh-arc42.adoc
:toc: left
// :toclevels: 3
// :toc-position: left

//required for kbd:
:experimental:


++++
<!-- github ribbon thanx to https://github.com/blog/273-github-ribbons -->
<a href="https://github.com/DataHandwerk/DataHandwerk-toolkit-mssql">
<img loading="lazy" width="149" height="149"
style="position: absolute; top: 0; left: 0; border: 0;"
src="https://github.blog/wp-content/uploads/2008/12/forkme_left_white_ffffff.png?resize=149%2C149"
class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1">
</a>
++++

= image:DatenHandwerk-toolkit-mssql.svg[dhw] DataHandwerk toolkit mssql - architecture
// // toc-title definition MUST follow document title without blank line!
// :toc-title: Table of Contents
:author: Germo Görtz
// :email: datahandwerk@aisberg.de
:date: {docdate}

// configure EN settings for asciidoc
// asciidoc settings for EN (English)
// ==================================
:toc-title: table of contents

// enable table-of-contents
:toc:

// where are images located?
:imagesdir: ./images

// configure project settings settings for asciidoc
:project: DataHandwerk-Toolkit-mssql
:project-name: DataHandwerk-Toolkit-mssql
:project-url: https://github.com/DataHandwerk/DataHandwerk-toolkit-mssql
:project-discussions: https://github.com/DataHandwerk/DataHandwerk-toolkit-mssql/discussions
:project-issues: https://github.com/DataHandwerk/DataHandwerk-toolkit-mssql/issues
:project-bugs: https://github.com/DataHandwerk/DataHandwerk-toolkit-mssql/issues?q=is%3Aopen+is%3Aissue+label%3Abug

:project-report-issue-link: https://github.com/DataHandwerk/DataHandwerk-toolkit-mssql/issues/new?title=&body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:

:repositoryDocsDir: https://github.com/DataHandwerk/DataHandwerk-toolkit-mssql/tree/main/docs/
:project-repository-docs-link: https://github.com/DataHandwerk/DataHandwerk-toolkit-mssql/tree/main/docs/
:project-repository-docs-edit-link: https://github.com/DataHandwerk/DataHandwerk-toolkit-mssql/edit/main/docs/

// configure style settings settings for asciidoc
//additional style for arc42 help callouts
++++
<style>
.arc42help {font-size:small; width: 14px; height: 16px; overflow: hidden; position: absolute; right: 0px; padding: 2px 0px 3px 2px;}
.arc42help::before {content: "?";}
.arc42help:hover {width:auto; height: auto; z-index: 100; padding: 10px;}
.arc42help:hover::before {content: "";}
@media print {
	.arc42help {display:hidden;}
}
</style>
++++

// numbering from here on
:numbered:

<<<<
// 1. Introduction and Goals
:filename: src/01_introduction_and_goals.adoc

[[section-introduction-and-goals]]
== Introduction and Goals

// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]

kbd:[DHW] (**D**ata**H**and**w**erk) is designed to support BI and DWH developers working with the Microsoft BI platform (MS SQL Server) in their work.

Handwerk statt Massenproduktion. Craft instead of mass production. +
MSSQL based tools for data craftsmen. Individual customization instead of assembly line.

// [role="arc42help"]
// ****
// Handwerk = craft +
// Handwerker = craftsmen

// Als Handwerk werden zahlreiche gewerbliche Tätigkeiten bezeichnet, die Produkte meist auf Bestellung fertigen oder Dienstleistungen auf Nachfrage erbringen. Die handwerkliche Tätigkeit steht der industriellen Massenproduktion gegenüber.

// Craft is the term used to describe numerous commercial activities that manufacture products mostly to order or provide services on demand. Craft activities are contrasted with industrial mass production.
// ****

[NOTE]
====
Handwerk = craft +
Handwerker = craftsmen

// Als Handwerk werden zahlreiche gewerbliche Tätigkeiten bezeichnet, die Produkte meist auf Bestellung fertigen oder Dienstleistungen auf Nachfrage erbringen. Die handwerkliche Tätigkeit steht der industriellen Massenproduktion gegenüber.

Craft is the term used to describe numerous commercial activities that manufacture products mostly to order or provide services on demand. Craft activities are contrasted with industrial mass production.
====

// Die wichtigsten Stakeholder des Projekts sind DWH-Entwickler, die ihre Arbeit als *Handwerk* verstehen.

// * Für diese Data-Handwerker wird eine Werkzeugkiste erstellt und nach und nach mit Werkzeugen gefüllt und erweitert.
// * Die Datenhandwerker erhalten mit der Toolbox die *Möglichkeit, schneller und besser* zu arbeiten und *bei Bedarf Teile zu automatisieren*, wenn (und nur wenn) sie das wünschen.
// * Werkzeuge und Methoden können einzeln und unabhängig voneinander *fakultativ* eingesetzt werden. Sie müssen nicht obligatorisch eingesetzt werden.
// * Die Toolbox soll immer *als Bereicherung und Hilfsmittel empfunden werden*, gerne als stützendes, nie als beengendes Korsett. +
// Ein Entwickler wird durch die Verwendung von Werkzeugen und Methoden nicht ungewünscht eingeschränkt. Er lässt sich partiell und bewusst einschränken, wenn für ihn subjektiv die Vorteile überwiegen.

The project's key stakeholders are DWH developers who see their work as a *craft*.

* A toolkit is created for these data craftsmen and gradually filled and expanded with tools.
* The data craftsmen are given the *possibility to work faster and better* with the toolkit and *to automate parts* if (and only if) they wish to do so.
* Tools and methods can be used individually and independently *optional*. They do not have to be used in a mandatory way.
* The toolbox should always be *perceived as an enrichment and aid*, gladly as a supportive, never as a constricting corset. +
A developer is not undesirably restricted by the use of tools and methods. He allows himself to be partially and consciously restricted if the advantages subjectively outweigh the disadvantages for him.

=== Requirements Overview


// . Kombination von Handarbeit und Werkzeugverwendung
// ** Die Kombination von _Handarbeit ohne Tools_ und der _Verwendung von Tools_ ist einfach möglich. Es darf *keine Einbahnstraße* geben.
// ** Ein *Entwickler wird nicht zum Sklaven* der Werkzeuge oder der Methoden, sondern kann jederzeit wie ein Handwerker selbst entscheiden kann, in welchem Umfang er welche Werkzeuge zu seiner Unterstützung verwenden will, oder eben nicht.
// . mssql und Azure Features
// ** Es muss für BI Entwickler *immer* möglich sein, *alle* mssql und Azure Features zu verwenden. Letztendlich also auch https://azure.microsoft.com/en-us/services/synapse-analytics/[Azure Synapse Analytics], Data Factory, BLOB Storage und andere Azure Produkte.
// ** Wann immer möglich oder gewünscht, kann ein Entwickler zur Realisierung von Zielen bevorzugt mssql Features verwenden, statt proprietärer Lösungen. Werkzeuge sollen deren Verwendung vereinfachen.
// *** temporale Tabellen
// *** Graph Datenbanken
// *** ...
// . ein minimal-invasives *Repository* ergänzt Datenbank-Metadaten
// ** Funktionen und Methoden, die in einer Datenbank nicht oder unzureichend vorhanden sind, werden über ein Repository (pro Datenbank) ergänzt, welches über Synonyme mit System-Katalog-Sichten der DWH-Datenbank verbunden ist.
// ** Ein Repository ist ebenfalls eine Datenbank: die Repository-Datenbank.
// ** Dieses Repository braucht und soll nicht alle Metadaten zur vollständigen Definition einer Datenbank enthalten, sondern nur notwendige oder sinnvolle Ergänzungen.
// ** Ein Repository wird von außen an eine DWH-Datenbank angeschlossen, mit _minimalen invasiven Eingriffen_ in diese Datenbank
// ** diese minimal invasiven Eingriffe lassen sich rückgängig machen
// ** für diese minimal invasiven Eingriffe werden (nach aktueller Konzeption) `extended properties` verwendet, die vielen Datenbank-Objekten und auch Spalten, Paramtern usw. zugewiesen und auch wieder entfernt werden können.
// *** durch die Verwendung eindeutiger `guid` ist es möglich, Objekte inklusive der in den `extended properties` gespeicherten zusätzlichen Metadaten in andere Datenbanken zu kopieren.
// . Unabhängigkeit von Sofort-Support
// ** Man soll auch arbeiten können, wenn ein Werkzeug nicht wie erwartet funktioniert. Es soll keine blockierende Abhängigkeit von einem Tool oder eine Methode entstehen, die Support-Feuerwehr-Einsätze erfordert, sondern es soll immer auch einen manuellen Ausweg geben.
// ** Dadurch soll insbesondere die Zusammenarbeit in der Community attraktiver werden: image:https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}"]
// . Dokumentation
// ** Das Repository, seine Funktionsweise und die Methoden werden *verständlich und ausführlich dokumentiert*. Eine gute Dokumentation
// *** bietet Transparenz
// *** schafft Verständnis
// *** erleichtert das selbständige Arbeiten
// *** erleichtert den Einstieg
// *** verringert die Abhängigkeit vom Support
// . Modularer Aufbau und Erweiterbarkeit
// ** Das Toolbox-Konzept ermöglicht, dass die Toolbox von verschiedenen Anwendern mit Modulen (Tools) erweitert werden kann.
// ** Beispiele für mögliche Module:
// *** Relation Management
// **** virtuelle PK und FK
// *** Persistierungs- und Historisierungs- Assistent
// *** Dokumentations-Assistent (inklusive Erstellung und Vererbung von Beschreibungen und Friendly Name)
// *** Data Lineage Visualizer
// *** Import Wizard
// *** SSIS Generator
// *** Data Factory Generator
// *** Data Vault Assistent
// *** DSGVO Assistent
// *** SSAS Tabular Generator
// *** Easy Refactoring
// *** ...


. Combination of manual work and the use of tools
** The combination of _handwork without tools_ and the _use of tools_ is easily possible. There must be *no one-way street*.
** A *developer does not become a slave* to the tools or the methods, but can at any time, like a craftsman, decide for himself to what extent he wants to use which tools to support him, or not.
. mssql and Azure features
** It must *always* be possible for BI developers to use *all* mssql and Azure features. So ultimately also https://azure.microsoft.com/en-us/services/synapse-analytics/[Azure Synapse Analytics], Data Factory, BLOB Storage and other Azure products.
** Whenever possible or desired, a developer may prefer to use mssql features to realize goals, rather than proprietary solutions. Tools should simplify their use.
*** temporal tables
*** graph databases
*** ...
. a minimally invasive *repository* supplements database metadata
** Functions and methods that are absent or insufficient in a database are supplemented via a repository (per database), which is connected via synonyms to system catalog views of the DWH database.
** A repository is also a database: the repository database.
** This repository does not need and should not contain all metadata to fully define a database, but only necessary or useful additions.
** A repository is externally connected to a DWH database, with _minimal invasive interventions_ in this database.
** these minimal invasive interventions can be undone
** for these minimal invasive interventions (according to current conception) `extended properties` are used, which can be assigned to many database objects and also columns, parameters etc. and also removed again.
*** by using unique `guid` it is possible to copy objects including the additional metadata stored in the `extended properties` into other databases.
. Independence from immediate support
** One should be able to work even if a tool does not work as expected. There shall be no blocking dependency on a tool or a method that requires support fire department interventions, but there shall always be a manual way out.
** This should especially make community collaboration more attractive: image:https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}"]
. Documentation
** The repository, how it works, and the methods are *clearly and thoroughly documented*. Good documentation
*** provides transparency
*** creates understanding
*** facilitates independent work
*** makes it easier to get started
*** reduces dependence on support
. Modular structure and expandability
** The toolbox concept allows the toolbox to be extended with modules (tools) by different users.
** Examples of possible modules:
*** Relation Management
**** virtual PK and FK
*** Persistence and Historization Assistant
*** Documentation Wizard (including creation and inheritance of descriptions and Friendly Name)
*** Data Lineage Visualizer
*** Import Wizard
*** SSIS Generator
*** Data Factory Generator
*** Data Vault Wizard
*** DSGVO Wizard
*** SSAS Tabular Generator
*** Easy Refactoring
*** ...

// Translated with www.DeepL.com/Translator (free version)

=== Quality Goals

. Fixing bugs is more important than implementing new features.
. A feature is only as good as its documentation.



=== Stakeholders

// .Stakeholders
// include::../excel/Stakeholders.xlsx/Stakeholders.adoc[]

// //before using the content of excel files, they need to be exported from Excel into adoc (they are also exported into csc)
// //use: exportExcel
// //https://doctoolchain.github.io/docToolchain/#_exportexcel

.Stakeholders
[options="header",cols="1,2,2a"]
|===
|Role/Name|Contact|Expectations

| dwh developer
|
|
* wants to work faster, more efficiently and more effectively
* wants to automate boring work optionally
* wants to decide for himself what he automates and what not
* does not want to become a slave of the tools

| dwh user
|
| wants a well documented DWH
|===

<<<<
// 2. Architecture Constraints
:filename: src/02_architecture_constraints.adoc

[[section-architecture-constraints]]
== Architecture Constraints

// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]

. a minimally invasive *repository database* supplements DWH database metadata
** A repository database is externally connected to a DWH database via *synonyms to system catalog views* of the DWH database.
** for additional _minimal invasive interventions_ `extended properties` are used, which can be assigned to many database objects and also columns, parameters etc. and also removed again.
** The DWH database works without the repository and all traces of a repository can be removed (extended properties can be dropped).
. It must *always* be possible for BI developers to use *all* mssql and Azure features in DWH databases.

=== Technical Constraints

.Technical Constraints
[options="header", cols="1,6,12a"]
|===
||Constraint|Background and / or motivation

3+|_Software and programming constraints_

|TC1
|Main implementation in TSQL
|

|TC2
|Additional implementation can use other programming languages
|some required components are not availabe or possible in TSQL

|TC3
|Third party software must be available under an compatible open source license and installable via a package manager
|The interested developer or architect should be able to check out the sources, compile and run the application without problems compiling or installing dependencies. All external dependencies should be available via the package manager of the operation system or at least through an installer.

3+|_Operating System Constraints_

|TC4
|Target OS: Windows
|The application should be compilable on all 3 mayor operation systems running SQL Server (Mac OS X, Linux and Windows), but Windows is the main target and Windows specific elements are OK


3+|_Hardware Constraints_


|===

=== Organizational Constraints

=== Conventions

.List of Conventions
[options="header", cols="1,6,12a"]
|===
||Constraint|Background and / or motivation

|C1
|Architecture documentation
|Structure based on the english arc42-Template

|===

<<<<
// 3. System Scope and Context
[[section-system-scope-and-context]]
== System Scope and Context

:filename: src/03_system_scope_and_context.adoc
// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]



=== Business Context



**<Diagram or Table>**

**<optionally: Explanation of external domain interfaces>**

=== Technical Context



**<Diagram or Table>**

**<optionally: Explanation of technical interfaces>**

**<Mapping Input/Output to Channels>**

<<<<
// 4. Solution Strategy
[[section-solution-strategy]]
== Solution Strategy

:filename: src/04_solution_strategy.adoc
// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]

<<<<
// 5. Building Block View
[[section-building-block-view]]


== Building Block View

:filename: src/05_building_block_view.adoc
// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]


=== Whitebox Overall System



_**<Overview Diagram>**_

Motivation::

_<text explanation>_


Contained Building Blocks::
_<Description of contained building block (black boxes)>_

Important Interfaces::
_<Description of important interfaces>_




==== <Name black box 1>



_<Purpose/Responsibility>_

_<Interface(s)>_

_<(Optional) Quality/Performance Characteristics>_

_<(Optional) Directory/File Location>_

_<(Optional) Fulfilled Requirements>_

_<(optional) Open Issues/Problems/Risks>_




==== <Name black box 2>

_<black box template>_

==== <Name black box n>

_<black box template>_


==== <Name interface 1>

...

==== <Name interface m>



=== Level 2



==== White Box _<building block 1>_



_<white box template>_

==== White Box _<building block 2>_


_<white box template>_

...

==== White Box _<building block m>_


_<white box template>_



=== Level 3




==== White Box <_building block x.1_>




_<white box template>_


==== White Box <_building block x.2_>

_<white box template>_



==== White Box <_building block y.1_>

_<white box template>_

<<<<
// 6. Runtime View
[[section-runtime-view]]
== Runtime View

:filename: src/06_runtime_view.adoc
// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]


=== <Runtime Scenario 1>


* _<insert runtime diagram or textual description of the scenario>_
* _<insert description of the notable aspects of the interactions between the
building block instances depicted in this diagram.>_

=== <Runtime Scenario 2>

=== ...

=== <Runtime Scenario n>

<<<<
// 7. Deployment View
[[section-deployment-view]]


== Deployment View

:filename: src/07_deployment_view.adoc
// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]


=== Infrastructure Level 1



_**<Overview Diagram>**_

Motivation::

_<explanation in text form>_

Quality and/or Performance Features::

_<explanation in text form>_

Mapping of Building Blocks to Infrastructure::
_<description of the mapping>_


=== Infrastructure Level 2



==== _<Infrastructure Element 1>_

_<diagram + explanation>_

==== _<Infrastructure Element 2>_

_<diagram + explanation>_

...

==== _<Infrastructure Element n>_

_<diagram + explanation>_

<<<<
// 8. Concepts
[[section-concepts]]
== Cross-cutting Concepts

:filename: src/08_concepts.adoc
// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]



=== _<Concept 1>_

_<explanation>_



=== _<Concept 2>_

_<explanation>_

...

=== _<Concept n>_

_<explanation>_

<<<<
// 9. Design Decisions
[[section-design-decisions]]
== Design Decisions

:filename: src/09_design_decisions.adoc
// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]

<<<<
// 10. Quality Scenarios
[[section-quality-scenarios]]
== Quality Requirements

:filename: src/10_quality_scenarios.adoc
// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]


=== Quality Tree



=== Quality Scenarios

<<<<
// 11. Technical Risks
[[section-technical-risks]]
== Risks and Technical Debts

:filename: src/11_technical_risks.adoc
// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]

<<<<
// 12. Glossary
[[section-glossary]]
== Glossary

:filename: src/12_glossary.adoc
// image::https://img.shields.io/badge/improve-this%20doc-orange.svg[link={project-repository-docs-edit-link}{filename}, float=right]
image::https://img.shields.io/badge/create-an%20issue-red.svg[link="{project-report-issue-link}{filename}", float=right]
image::https://img.shields.io/badge/collaborate-in%20discussions-blue.svg[link="{project-discussions}", float=right]



[options="header"]
|===
| Term         | Definition
| <Term-1>     | <definition-1>
| <Term-2>     | <definition-2>
|===

// horizontal line
***
:filename: src/about-arc42.adoc
// :homepage: http://arc42.org

// :keywords: software-architecture, documentation, template, arc42

// :numbered!:
**About arc42**

// == About arc42

[role="lead"]
arc42, the Template for documentation of
software and system architecture.

By Dr. Gernot Starke, Dr. Peter Hruschka and contributors.


Template Revision: 7.0 EN (based on asciidoc), January 2017

(C)
We acknowledge that this document uses material from the
arc 42 architecture template, https://arc42.de, https://arc42.org/
Created by Dr. Peter Hruschka & Dr. Gernot Starke.